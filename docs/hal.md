# Библиотека аппаратных абстракций (HAL)

Библитека предоставляет ядру и пользователю возможность взаимодействовать с аппаратурой микроконтролера через простой программный интерфейс. Библиотека берет на себя обязаности по первоначальной инициализации аппаратуры.

Общии параметры библиотеки находятся в файле hal_configuration.h.
Индивидуальные настройки модулей описаны в коде самих модулей.
Список кодов ошибок в файле hal.h.

Инициализация модулей происходит через вызов 
```C
hal_retcode hal_init(void);
```

Все модули разделены на два типа: системные и общие. Системные модули необходимы ядру ОС

| Системные модули 	| Описание 													|
| ------ 			| ------ 													|
| hal_idle.h 		| Режимы энергосбережения 									|
| hal_sysclock.h 	| Тактовая подсистема микроконтроллера. Systick				|
| hal_unhndl_int.h 	| Привязка неотслеживаемых прерываний к ядру. kernel_panic	|

| Общие модули		| Описание 													|
| ------ 			| ------ 													|
| hal_lse.h 		| Управление часовым генератором 							|
| hal_rtc.h 		| Часы реального времени									|
| hal_idle.h 		| Режимы энергосбережения 									|
| hal_sysclock.h 	| Тактовой подсистема микроконтроллера						|
| hal_adc.h 		| Измерение напряжения										|
| hal_uart_dbg.h 	| Вывод отладочных данных									|
| hal_spi.h 		| Передача данных hal_spi									|
| hal_wdt.h 		| Сторожевой таймер для контроля зависания ПО				|
| hal_timers.h 		| Таймер задержки, таймеры-генераторы событий/задач			|
| hal_counters.h 	| Измерители временных интервалов мс/мкс					|
| hal_leds.h 		| Управление индикацией										|
| hal_rst_btn.h 	| Тактовая кнопка сброса на wakeup pin 						|
| hal_int_flash.h 	| Работа со встроенной флеш памятю для хранения состояний	|


## Подсистема HAL
Подсистема состоит из раздельных модулей с именем HAL_xxx.c (HAL_ADC.c)  и заголовочным файлом HAL_xxx.h (HAL_ADC.h). Каждый модуль выполняеть только свойственный ему функционал, не нужно создавать универсальные модули. Модуль 
может использовать другии модули и поэтому важен порядок инициализации.
Инициализация модулей происходит в файле hal.c, он же определяет ее порядок.

### hal_ret hal_init(void)