
# Микро-ОС Neos (Neocore OS)  

ОС предназначена для управления асинхронными задачами в приборах беспроводной 
связи сенсорной сети и обеспечения режима низкого энергопотребления системы. 
*Главной задачей операционной системы является управление потоком задач.*
Ядро ОС использует минимум аппаратных функций микроконтролера и не предоставляет пользователю функцонала по управлению перефирийными устройствами, так как создание подобной переносимой библиотеки весьма сложная задача и на текущий момент разработки в ней нет необходимости. 
Ядро не предоставляет универсального интерфейса обработки прерывания, так 
как это влечет за собой дополнительный расход времени.
Аппаратные функции необходимые ядру
* hwRunMode - перевод MCU в рабочий режим
* hwLPMode - перевод MCU в режим пониженного энергопотребления

# Устройство операционной сисетемы NEOS

## Устройство ядра

* Hardware portable
  Поддержка различной ядра на разных платформах. Реализуются только необходимый
  минимум функционала.

* Event manager
  Реализует событийную модель поведения системы.

* Task manager
  Отвечает за функционирование приоритетной очереди задач.

* Task scheulder
  Планировщик задач добавляет в очередь задачи согласно возникшим событиям 
  в системе. Он же запускает задачи на выполнение согласно их приоритетам.
  При отсутвии задач переводит систему в режим пониженного энергопотребления. 

* Kernel panic
  Обработка исключитильные ситуации в ядре (переполнение очереди событий, задач, возникновение необрабатываемых прерываний).

* Init service
  Передача управления пользовательскому коду для связывания событий с 
  обработчиками, иницилизацией необходимой переферии. После выполнения функции
  запускается планировщик задач.

## Системные приложения
Системные приложения расширяют функционал ядра и не всегда могут быть в полной 
мере поддержаны аппаратной платформой. На разных платформах реализация 
приложений отличается из-за аппаратных различий.

* Общий таймер
  Программируемый таймер позволяет генерировать события в заданные моменты
  времени. Таймер работает в режиме пониженного энергопотребления. 
  Таймер содержит свой планировщик времени, который позволяет на одном 
  аппаратном счетчике генерировать множество различных интервалов.
  Точность такого таймер относитетльно привязки к времени может быть не высокой
  за счет необходимости проведения дополнительных действий перед 
  непосредственным выполнением задачи.

* Точный таймер
  Таймер имеющий высокий приоритет перед всеми остальными задачами. 
  Может устанавливать на выполнение только одну задачу, но без лишних
  временных затрат. Задача таймера выполняется внутри прерывания и не может
  быть прервана. Такого рода инструмент необходим для создания синхронных
  задач в реальном времени.

* Задержки
  На аппаратных таймерах реализует задержки мс, мкс и функции измерения
  времени. 
  
* Часы реального времени
  Выдача времени в часах, минутах, секундах. Используется приложениями
  контролирующие долгие процессы в системе(измерения, выдача сообщения о 
  здоровье узла и т.д.).

* База данных
  *Пока что это идея.*
  Хранение информации в формате:  
  (код физ. величины)+(номер)/значение.    
  код физической величины - Амперы, Вольты, Градусы, Скорость, Состояние
  номер - от 0 до 7. Номер датчика который произвел измерения
  Булево знач. (true/false)

  КФВ -        4 бит
  Номер -      3 бит
  Булево знач. 1 бит

  Значение - 4 байта

  КФВ = 0 Для данных с бинарным состоянием. При этом значения сохраняется
  в поле Булево значение 

### Установка отладчика gdb
Имя пакета было изменено на gdb-arm-none-eabi.
sudo apt install gdb-arm-none-eabi
установит приложение:
arm-none-eabi-gdb