
# Настройки ассемблера
#-------------------------------------------------------------------------------
AFLAGS += -alh
AFLAGS += -mapcs-32

# Генерируем список файлов для компилиции и список обьектных файлов
#-------------------------------------------------------------------------------
SRC = startup_stm32l1xx_md.s
OBJ = $(SRC:.s=.o)

# Добавляем список обьектных файлов к проекту
#-------------------------------------------------------------------------------
OBJS += OBJ

# Правило сборки
#-------------------------------------------------------------------------------
$(OBJ):$(SRC)
startup_stm32l1xx_md.o : startup_stm32l1xx_md.s
	@echo "\e[1;34mBuilding $<\e[0m"
	@$(AS) $(AFLAGS) -c $< -o $@ > /dev/null